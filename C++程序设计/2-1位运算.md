# 2-1 位运算
### 一、基本概念
#### 1.位运算：
用于对整数数型(int,char,long等)变量中的某一位(bit)或者若干位进行操作。比如：  
1） 判断某一位是否为1；  
2） 只改变其中某一位，而保持其他位不变。  
C/C++语言提供了六种位运算符来进行位运算操作：  
>      &          按位与（双目）   
>      |          按位或（双目）  
>      ^          按位异或（双目）  
>      ~          按位非（取反）（单目）  
>      <<         左移（双目）  
>      >>         右移（双目）
##### 1）按位与“&”
将参与运算的两操作数各对应的二进制位与操作，只有对应的两个二进制位均为1时，结果的对应的二进制位才为1，否则为0。
>通常用来将变量中的某些位清零且同时保留其他位不变。也可以用来获取某变量中的某一位。  
>  例如：如果需要int型变量n的低8位全置成0，而其余位不变，则可以执行：    
>  n = n & 0xffffff000；  
> 也可以写成：  
>  n & = 0xffffff000；
> 如果n是short类型的，则只需执行：
>  n & = 0xff00；

>如何判断一个int类型变量n的第7位（从左往右，从0开始数）是否为1？  
> 只需要看表达式"n & 0x80"的值是否等于 0x80 即可。  
> 0x80：10000000
##### 2）按位或“|”
将参与运算的两操作数各对应的二进制位或操作，只有对应的两个二进制位均为0时，结果的对应的二进制位才为0，否则为1。
>按位或运算通常用来将某变量中的某些位置1且保留其他为不变。  
> 例如：如果需要将int型变量n的低八位全置成1，而其余位不变，则可以执行：  
> n |=0xff;   
> 0xff:1111 1111
##### 3）按位异或“^”
将参与运算的两操作数各对应的二进制位异或操作，只有对应的两个二进制位不相同时，结果的对应的二进制位才为1，否则为0。
>按位异或运算通常用来将某变量中的某些位置取反，且保留其他为不变。  
> 例如：如果需要将int型变量n的低8位取反，而其余位不变，则可以执行：  
> n ^=0xff;   
> 0xff:1111 1111

>异或运算的特点是：
- 如果a^b=c，那么就有c^b=a以及c^a=b（穷举法可证）  
此规律可以用来进行最简单的加密和解密。   
- 另外异或运算还能实现不通过临时变量，就能交换两个变量的值：

>     int a=5,b=7;
>     a=a^b;
>     b=b^a;
>     a=a^b;
>     即实现a，b值交换，穷举法可证。
##### 4）按位非（取反）“~”
按位非运算符"~"是单目运算符，其功能是将操作数中的二进制位0变成1,1变成0。
##### 5）左移运算符“<<”
- 表达式：a<<b;
的值是：将a各二进制位全部左移b位后得到的值。左移后，高位丢弃，低位补0.a的值不因运算而改变。   
- 实际上，左移1位，就等于乘以2，左移n位，就等于乘以2的n次方，而左移操作比乘法操作快得多。
##### 6）右移运算符“>>”
- 表达式：a>>b;
的值是：将a各二进制位全部右移b位后得到的值。右移时，移除最右边的位就被丢弃。a的值不因运算而改变。   
- 对于有符号数，如类型变量，在右移时，符号位（即最高位）将一起移动，并且大多数C/C++编译器规定，如果原符号位为1，则右移时高位就补1，原符号位为0，则右移时高位就补充0。
- 实际上，右移n位，就相当于左操作数除以2的n次方，并且将结果往小里取整。
>      -25>>4=-2
>       -2>>4=-1    //注意往小里取整
>       18>>1

>     #include<stdio.h>
>     int main()
>     {
>        int n1=15;
>        short n2=-15;
>        unsigned short n3=0xffe0;
>        char c=15;
>        n1=n1>>2;//右移
>        n2>>=3;
>        n3>>=4;
>        c>>=3;
>        printf("n1=%d,n2=%x,n3=%x,c=%x",n1,n2,n3,c);
>     }

###### 思考题：
1）有两个int型的变量a和n(0 <= n <= 31)，要求写一个表达式，使该表达式的值和a的第n位相同。
-     (a>>n)&1         //左边31位都为0，最后一位bn
-     (a&(1<<n))>>n    //n的值不能是31，31时需要考虑符号位，影响结果
